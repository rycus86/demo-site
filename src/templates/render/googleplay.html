{% set app_name = data.package_name|replace('.', '_') %}
<div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--4-col mdl-cell--top github"
     id="googleplay-{{ app_name }}">

    <div class="mdl-card__title mdl-card--border">
        <h2 class="mdl-card__title-text">{{ data.title }}</h2>
    </div>

    <div class="mdl-card__supporting-text">
        <p>
            <span id="googleplay-download-count-{{ app_name }}" class="mdl-chip mdl-chip--contact">
                <i class="mdl-chip__contact material-icons">file_download</i>

                <span class="mdl-chip__text">
                    {{ data.download_count }}
                </span>
            </span>
            <span id="googleplay-rating-{{ app_name }}" class="mdl-chip mdl-chip--contact">
                <i class="mdl-chip__contact material-icons">star</i>

                <span class="mdl-chip__text">
                    {{ '%.2f'|format(data.ratings.stars) }}
                </span>
            </span>
            <span id="googleplay-time-updated-{{ app_name }}" class="mdl-chip mdl-chip--contact">
                <i class="mdl-chip__contact material-icons">event</i>
                <span class="mdl-chip__text momentjs-time" data-time="{{ data.upload_date }}" data-prefix="last updated">
                    {{ data.upload_date }}
                </span>
            </span>
        </p>

        <div class="mdl-tooltip mdl-tooltip--bottom"
             data-mdl-for="googleplay-download-count-{{ app_name }}">
            {{ data.download_count }} downloads
        </div>
        <div class="mdl-tooltip mdl-tooltip--bottom"
             data-mdl-for="googleplay-rating-{{ app_name }}">
            {{ '%.4f'|format(data.ratings.stars) }} stars based on {{ data.ratings.total }} ratings
        </div>
        <div class="mdl-tooltip mdl-tooltip--bottom"
             data-mdl-for="googleplay-time-updated-{{ app_name }}" data-date="{{ data.upload_date }}">
            {{ data.upload_date }}
        </div>
    </div>

    {% if data.images %}
    <div class="mdl-card__title mdl-card--border">Images</div>
    <div class="mdl-card__supporting-text">
        <div class="images slick-images">
            {% for image in data.images %}
            <div class="image-container">
                <img src="{{ image.url }}">
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    <div class="mdl-card__title mdl-card--border">README</div>
    <div class="mdl-card__supporting-text">
        <div class="readme">{{ data.description_html|safe }}</div>
    </div>

    <div class="mdl-card__actions mdl-card--border card-actions-light">
        <a id="googleplay-link-{{ app_name }}" href="{{ data.share_url }}">
            <span class="mdl-chip mdl-chip--contact">
                <i class="mdl-chip__contact material-icons">shop</i>

                <span class="mdl-chip__text">
                    Google Play Store
                </span>
            </span>
        </a>

        {% if data.developer_website %}
        <a id="googleplay-website-{{ app_name }}" href="{{ data.developer_website }}">
            <span class="mdl-chip mdl-chip--contact">
                <i class="mdl-chip__contact material-icons">public</i>

                <span class="mdl-chip__text">
                    Website
                </span>
            </span>
        </a>
        {% endif %}

        <div class="mdl-tooltip mdl-tooltip--bottom" data-mdl-for="googleplay-link-{{ app_name }}">
            {{ data.share_url }}
        </div>

        {% if data.developer_website %}
        <div class="mdl-tooltip mdl-tooltip--bottom" data-mdl-for="googleplay-website-{{ app_name }}">
            {{ data.developer_website }}
        </div>
        {% endif %}
    </div>

</div>

<script>
    cApp.DateTime.formatTimeFromNow('googleplay-{{ app_name }}');
    cApp.DateTime.formatDate('googleplay-{{ app_name }}');

    $('#googleplay-{{ app_name }} .mdl-tooltip').each(function (idx, item) {
        componentHandler.upgradeElement(item);
    });

    {% if data.images %}
    $('#googleplay-{{ app_name }} .slick-images').slick({
        dots: true,
        infinite: true,
        variableWidth: true,
        slidesToShow: 2,
        slidesToScroll: 1
    });
    {% endif %}
</script>
